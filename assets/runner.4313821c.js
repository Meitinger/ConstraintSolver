var A=Object.defineProperty,N=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var R=(e,l,c)=>l in e?A(e,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[l]=c,w=(e,l)=>{for(var c in l||(l={}))_.call(l,c)&&R(e,c,l[c]);if($)for(var c of $(l))o.call(l,c)&&R(e,c,l[c]);return e},v=(e,l)=>N(e,S(l));(function(){"use strict";const e=g=>{throw g};(g=>{onmessage=y=>postMessage(g(y.data))})(({expression:g})=>{const y=t=>{switch(typeof t){case"boolean":return t?"true":"false";case"number":return t.toString();default:return`reference to #${t.label}`}},f=(t,n,h)=>{var E;const m=(u,a,M)=>new TypeError(`Evaluation of expression #${u.label} yielded ${y(a)}, needed ${M}.`),b=u=>f(u,n,h),r=u=>{const a=f(u,n,h);return typeof a=="number"?a:e(m(u,a,"number"))},d=u=>{const a=f(u,n,h);return typeof a=="boolean"?a:e(m(u,a,"boolean"))};if(h>100)throw new EvalError(`Limit of ${100} recursions exceeded.`);switch(t.type){case"n":return t.value;case"true":return!0;case"false":return!1;case"var":return(E=n[t.name])!=null?E:e(new TypeError(`Variable "${t.name}" in expression #${t.label} not in scope.`));case"+":return r(t.left)+r(t.right);case"-":return r(t.left)-r(t.right);case"*":return r(t.left)*r(t.right);case"/":return Math.trunc(r(t.left)/r(t.right));case"<":return r(t.left)<r(t.right);case">":return r(t.left)>r(t.right);case"<=":return r(t.left)<=r(t.right);case">=":return r(t.left)>=r(t.right);case"==":return b(t.left)===b(t.right);case"!=":return b(t.left)!==b(t.right);case"||":return d(t.left)||d(t.right);case"&&":return d(t.left)&&d(t.right);case"if":return d(t.condition)?b(t.thenBody):b(t.elseBody);case"fn":case"fun":return t;case"app":{const u=f(t.argument,n,h),a=f(t.callable,n,h);switch(typeof a){case"boolean":case"number":throw m(t.callable,a,"reference");default:switch(a.type){case"fn":return f(a.body,v(w({},n),{[a.variable]:u}),h+1);case"fun":return f(a.body,v(w({},n),{[a.name]:a,[a.variable]:u}),h+1);default:throw m(t.callable,a,"reference to fn or fun expression")}}}case"let":return f(t.body,v(w({},n),{[t.variable]:f(t.value,n,h)}),h)}};return{value:y(f(g,{},0))}})})();
